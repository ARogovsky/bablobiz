---
import Layout from "@layouts/Layout.astro";
import Container from "@components/container.astro";
import Sectionhead from "@components/sectionhead.astro";
import PricingCard from "@components/pricing.astro";
import { getEntryBySlug } from "astro:content";

// Fetch pricing data
const pricingData = await getEntryBySlug("pricing", "pricing");
const { title, description, plans } = pricingData.data;
---

<Layout title={title}>
  <Container>
    <div class="min-h-screen flex flex-col">
      <div class="flex-1">
        <Sectionhead>
          <Fragment slot="title">{title}</Fragment>
          <Fragment slot="desc">{description}</Fragment>
        </Sectionhead>

        <div class="grid md:grid-cols-3 gap-10 mx-auto max-w-screen-lg mt-12">
          {plans.map((plan) => <PricingCard plan={plan} />)}
        </div>
      </div>

      <div id="demo-form" class="min-h-screen flex items-center justify-center">
        <div class="w-full max-w-screen-lg mx-auto">
          <div data-tf-live="01JNG6BNNC9KGBNMS9TBQFCEAV"></div>
          <script is:inline src="//embed.typeform.com/next/embed.js"></script>
        </div>
      </div>
    </div>
  </Container>
</Layout>

<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    // Handle smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
  });
</script>
